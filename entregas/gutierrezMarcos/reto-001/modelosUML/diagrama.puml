@startuml
' Ocultamos los atributos y métodos para dejar solo los "cascarones"
hide empty members
skinparam roundcorner 5
skinparam class {
    BackgroundColor White
    ArrowColor Black
    BorderColor Black
}

' ==========================================
' SECCIÓN DE ENUMS
' ==========================================
enum TipoSuscripcion
enum TipoAlbum
enum FamiliaInstrumento

' ==========================================
' SECCIÓN DE CLASES PRINCIPALES
' ==========================================
class Plataforma
class Usuario
class Artista
class Album
class Cancion
class Playlist
class Instrumento
class Genero

' Nuevas clases para el motor de analítica musical
class Reproduccion
class Estadistica

' ==========================================
' RELACIONES CON ENUMS (Uso / Dependencia)
' ==========================================
Usuario ..> TipoSuscripcion : usa >
Album ..> TipoAlbum : usa >
Instrumento ..> FamiliaInstrumento : pertenece a >

' ==========================================
' RELACIONES ENTRE CLASES 
' ==========================================

' Agregación: La plataforma agrupa usuarios y artistas.
Plataforma o-- Usuario : aloja >
Plataforma o-- Artista : distribuye >

' Composición: La playlist le pertenece al usuario. 
Usuario *-- Playlist : posee >

' Agregación: La playlist agrupa canciones (independientes).
Playlist o-- Cancion : agrupa >

' Composición: Las canciones nacen de un lanzamiento.
Album *-- Cancion : contiene >

' Uso/Dependencia: Acción del artista sobre la música.
Artista ..> Album : lanza >
Artista ..> Cancion : interpreta >

' Uso/Dependencia: Categorización.
Cancion ..> Genero : clasificada en >
Cancion ..> Instrumento : suena con >

' ==========================================
' MOTOR DE REPRODUCCIONES Y ESTADÍSTICAS
' ==========================================

' Composición: El historial de escuchas le pertenece al usuario.
Usuario *-- Reproduccion : genera >

' Uso: El evento de reproducción simplemente apunta a qué canción sonó.
Reproduccion ..> Cancion : escucha >

' Composición: La plataforma es dueña de su motor de analíticas.
Plataforma *-- Estadistica : calcula >

' Uso: Las estadísticas toman las reproducciones sueltas, las consolidan 
' y miden el rendimiento de artistas y canciones.
Estadistica ..> Reproduccion : consolida >
Estadistica ..> Artista : mide a >
Estadistica ..> Cancion : mide a >
@enduml